<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elab Ground Station | Demo 3</title>
    <meta name="description" content="Responsive Animated Border Menus with CSS Transitions" />
    <meta name="keywords" content="navigation, menu, responsive, border, overlay, css transition" />
    <meta name="author" content="Codrops" />
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" type="text/css" href="static/css/normalize.css" />
    <link rel="stylesheet" type="text/css" href="static/css/demo.css" />
    <link rel="stylesheet" type="text/css" href="static/css/icons.css" />
    <link rel="stylesheet" type="text/css" href="static/css/style3.css" />

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script src="static/js/gauge.js"></script>
    <script src="static/js/button.js"></script>

    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
    <script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
    <style>
    #map {
        width: 350px;
        height: 200px;
    }

    @keyframes fade { 
  from { opacity: 0.5; } 
}

.blinking {
  animation: fade 1s infinite alternate;
}
</style>
<script type="text/javascript">
    $SCRIPT_ROOT = {
        {
            request.script_root | tojson | safe
        }
    };

    function get_altitude() {
        $.getJSON($SCRIPT_ROOT + '/_add_numbers',
            function(data) {
                $("#flight_mode").text(data.result);
            }
            )
    }
</script>
<script type="text/javascript">
    var globmsg = null;
    var source = new EventSource('/api/sse/state');

    source.onmessage = function(event) {
        var msg = JSON.parse(event.data);
        if (!globmsg) {
            $("#altitude").text("Altitude: " + msg.alt);
            $("#battery").text("Battery level: " + msg.battery);
            $("#airspeed").text("Groundspeed: " + msg.airspeed);
            $("#mode").text(msg.mode);
            $(".text-box").val(msg.alt).trigger('change');
        }
    }
</script>


<script src="js/modernizr.custom.js"></script>
</head>

<body>
    <div class="container">
        <header class="codrops-header">
            <div class="container">

                <div id="content" style="display:none;">
                    <!--this stuff takes a long time to load-->
                    <img src="{{ url_for('video_feed') }}" alt="test" style="width:100%;">
                    <div class="bottom-left">
                        <h7><span id="airspeed">Top Left</span>
                        </h7>

                        <div class="guage-holder">
                            <div class="circle-mask">
                                <div class="circle">
                                    <div class="circle-inner"></div>
                                </div>
                            </div>
                            <div class="percentage">0 %</div>
                            <input type="text" class="text-box" />
                            <div class="gauge-copy"></div>
                        </div>
                    </div>
                    <div class="top-left">
                        <h7><span id="altitude">Top Left</span>
                        </h7>
                        
                    </div>
                    <button class="bubbly-button">Take Off</button>
                    <button class="bubbly-button-land">Land</button>
                    
                    <div class="top-right">
                        <h7><span id="mode">Top Left</span>
                        </h7>
                    </div>
                    <div class="bottom-right">
                        <div id="map"></div>
                        <script src="static/js/index.js"></script>
                    </div>
                </div>

                <div id="loading">
                    <!-- this is the loading gif -->
                    <!--<img src="static/img/loading.gif">-->
                    <div id="particle-canvas" style="width:100%;height:720px">


                        <div class="centered">
                            <button id="calculate">Click To Connect</button>
                          
                       </div>
                       
                   </div>

               </div>
           </div>
       </header>





        <nav id="bt-menu" class="bt-menu">
            <a href="#" class="bt-menu-trigger"><span>Menu</span></a>
            <ul>
                <li><a href="about.html" class="bt-icon icon-user-outline">Drive</a>
                </li>
                <li><a href="parameters.html" class="bt-icon icon-windows">Parameters</a>
                </li>
                <li><a href="missions.html" class="bt-icon icon-speaker">Missions</a>
                </li>
                <li><a href="#" class="bt-icon icon-speaker">Dashboard</a>
                </li>
                <li><a href="#" class="bt-icon icon-star">tuning</a>
                </li>
                <li><a href="#" class="bt-icon icon-bubble">Calibration</a>
                </li>
            </ul>
        </nav>
    </div>
    <!-- /container -->
</body>
<script type="text/javascript">
    // when user browses to page
    //$('#content').hide();
    //$('#loading').show();

    // then when the #content div has loaded
    $('button#calculate').bind('click', function() {
        //$('#content').hide();
        //$('#loading').show();
       $('#loading').hide();
       $('#content').show();
    });
</script>
<script src="static/js/canvas.js"></script>
<script src="static/js/classie.js"></script>
<script src="static/js/borderMenu.js"></script>

</html>